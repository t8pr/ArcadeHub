{% extends "base.html" %}

{% block title %}الرئيسية - منصة ألعاب عربية{% endblock %}

{% block content %}
    <main class="container">
        <section class="features">
            <!-- Large Box -->
            <div class="feature-box large">
                <div class="feature-icon">
                    <i class="fas fa-gamepad"></i>
                </div>
                <h3>ألعاب سعودية مميزة</h3>
                <p>اكتشف مجموعة مختارة من أفضل الألعاب العربية التي أنشأها مطورون موهوبون من جميع أنحاء العالم العربي</p>
            </div>
            
            <!-- Tall Box -->
            <div class="feature-box tall">
                <div class="feature-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <h3>الألعاب الأكثر شهرة</h3>
                <p>تعرف على الألعاب الأكثر تحميلاً وتقييماً من قبل مجتمعنا</p>
                <div style="margin-top: auto; padding-top: 1rem;">
                    <a class="btn" href="{{ url_for('games') }}">الألعاب</a>
                </div>
            </div>
            
            <!-- Small Box 1 -->
            <div class="feature-box small">
                <div class="feature-icon">
                    <i class="fas fa-upload"></i>
                </div>
                <h3>نشر الألعاب</h3>
                <p>شارك إبداعاتك مع المجتمع العربي</p>
                <a style="margin-top: 10px;" class="btn" href="{{ url_for('upload') }}">رفع لعبة</a>
            </div>
            
            <!-- Small Box 2 -->
            <div class="feature-box small">
                <div class="feature-icon">
                    <i class="fas fa-users"></i>
                </div>
                <h3>مجتمع نشط</h3>
                <p>انضم إلى آلاف المطورين واللاعبين</p>
            </div>
            
            <!-- Small Box 3 -->
            <div class="feature-box small">
                <div class="feature-icon">
                    <i class="fas fa-award"></i>
                </div>
                <h3>مسابقات</h3>
                <p>شارك في مسابقات الألعاب واربح جوائز</p>
            </div>
            <div class="small">
                <div class="logobox">
                        <img style="        width: 45%;
                        padding: 5px 0;
                    border-radius: 15px;" src="{{ url_for('static', filename='images/logo.png') }}" onerror="this.style.display='none'">
                </div>
            </div>
        </section>
            <!-- Status Bar Section -->
    <section class="container">
        <div class="status-bar">
            <div class="status-item">
                <div class="status-number" id="userCount">0</div>
                <div class="status-label">مستخدم مسجل</div>
            </div>
            <div class="status-item">
                <div class="status-number" id="gameCount">0</div>
                <div class="status-label">لعبة متاحة</div>
            </div>
            <div class="status-item">
                <div class="status-number" id="downloadCount">0</div>
                <div class="status-label">تحميل</div>
            </div>
            <div class="status-item">
                <div class="status-number" id="developerCount">0</div>
                <div class="status-label">مطور نشط</div>
            </div>
        </div>
    </section>

    </main>

    <script>
    // Get the real stats from the server
    const realStats = {
        userCount: {{ stats.user_count }},
        gameCount: {{ stats.game_count }},
        downloadCount: {{ stats.download_count }},
        developerCount: {{ stats.developer_count }}
    };

    // Animated counter for status bar
    function animateCounter(element, finalValue, duration = 2000) {
        const start = 0;
        const increment = finalValue / (duration / 16);
        let current = start;
        
        const timer = setInterval(() => {
            current += increment;
            if (current >= finalValue) {
                clearInterval(timer);
                current = finalValue;
            }
            element.textContent = Math.floor(current).toLocaleString();
        }, 16);
    }

    // Start counters when page loads
    window.addEventListener('load', () => {
        animateCounter(document.getElementById('userCount'), realStats.userCount);
        animateCounter(document.getElementById('gameCount'), realStats.gameCount);
        animateCounter(document.getElementById('downloadCount'), realStats.downloadCount);
        animateCounter(document.getElementById('developerCount'), realStats.developerCount);
    });
    </script>
{% endblock %}