{% extends "base.html" %}

{% block content %}
<div class="account-container">
    <!-- Mobile Header -->
    <div class="mobile-account-header">
        <h1>حسابي</h1>
        <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
            <i class="fas fa-bars"></i>
        </button>
    </div>

    <div class="account-content-wrapper">
        <!-- Sidebar -->
        <div class="account-sidebar" id="accountSidebar">
            <div class="account-profile-card">
                <div class="account-avatar">
                    <img src="{{ url_for('static', filename='images/default-avatar.jpg') }}" alt="صورة الملف الشخصي">
                    <div class="online-status {{ 'online' if True else 'offline' }}"></div>
                </div>
                <div class="account-info">
                    <h3>{{ user.username }}</h3>
                    <p class="account-type-badge {{ 'developer' if user.is_developer() else 'user' }}">
                        {{ "مطور" if user.is_developer() else "مستخدم" }}
                    </p>
                    <p class="account-email">{{ user.email }}</p>
                </div>
            </div>

            <nav class="account-menu">
                <a href="#profile" class="menu-item active" onclick="showSection('profile')">
                    <i class="fas fa-user"></i>
                    <span>معلومات الحساب</span>
                </a>
                <a href="#wishlist" class="menu-item" onclick="showSection('wishlist')">
                    <i class="fas fa-heart"></i>
                    <span>قائمة المفضلة</span>
                </a>
                {% if user.is_developer() %}
                <a class="menu-item" target="_blank" href="{{ url_for('developer_profile', username=current_user.username) }}">
                    <i class="fas fa-file-alt"></i>
                    <span>عرض السيرة الذاتية</span>
                </a>
                <a href="#my-games" class="menu-item" onclick="showSection('my-games')">
                    <i class="fas fa-gamepad"></i>
                    <span>ألعابي</span>
                </a>
                <a href="{{ url_for('upload') }}" class="menu-item">
                    <i class="fas fa-upload"></i>
                    <span>رفع لعبة جديدة</span>
                </a>
                {% endif %}
                
                <a href="#security" class="menu-item" onclick="showSection('security')">
                    <i class="fas fa-shield-alt"></i>
                    <span>الأمان</span>
                </a>
                
                <a href="#settings" class="menu-item" onclick="showSection('settings')">
                    <i class="fas fa-cog"></i>
                    <span>الإعدادات</span>
                </a>
                
                <a href="{{ url_for('logout') }}" class="menu-item logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>تسجيل الخروج</span>
                </a>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="account-main-content">
        <!-- Profile Section -->
        <div id="profile" class="content-section active">
            <div class="section-header">
                <h2><i class="fas fa-user"></i> معلومات الحساب</h2>
                <button class="btn btn-edit" onclick="toggleEdit('profile')">تعديل</button>
            </div>

            <form action="{{ url_for('update_username') }}" method="POST" id="username-form" style="display: none;">
                <div class="profile-info">
                    <div class="info-item">
                        <label>اسم المستخدم:</label>
                        <span id="username-display">{{ user.username }}</span>
                        <input type="text" id="username-edit" name="new_username" value="{{ user.username }}" 
                            class="edit-field" minlength="3" maxlength="20" 
                            pattern="[a-zA-Z0-9_]+" title="أحرف إنجليزية وأرقام وشرطة سفلية (_) فقط"
                            style="display: none;">
                    </div>
                    
                    <div class="info-item">
                        <label>البريد الإلكتروني:</label>
                        <span>{{ user.email }}</span>
                    </div>
                    
                    <div class="info-item">
                        <label>نوع الحساب:</label>
                        <span class="account-type {{ 'developer' if user.is_developer() else 'user' }}">
                            {{ "مطور ألعاب" if user.is_developer() else "مستخدم عادي" }}
                        </span>
                    </div>
                    
                    <div class="info-item">
                        <label>تاريخ الإنشاء:</label>
                        <span>
                            {% if user.created_at %}
                                {{ user.created_at | format_date }}
                            {% else %}
                                غير متوفر
                            {% endif %}
                        </span>
                    </div>
                </div>

                <div class="edit-buttons" id="profile-edit-buttons" style="display: none;">
                    <button type="submit" class="btn btn-primary">حفظ</button>
                    <button type="button" class="btn btn-secondary" onclick="cancelEdit('profile')">إلغاء</button>
                </div>
            </form>

            <div id="profile-display" style="display: block;">
                <div class="profile-info">
                    <div class="info-item">
                        <label>اسم المستخدم:</label>
                        <span>{{ user.username }}</span>
                    </div>
                    
                    <div class="info-item">
                        <label> البريد الإلكتروني:</label>
                        <span>{{ user.email }}</span>
                    </div>
                    
                    <div class="info-item">
                        <label>نوع الحساب:</label>
                        <span class="account-type {{ 'developer' if user.is_developer() else 'user' }}">
                            {{ "مطور ألعاب" if user.is_developer() else "مستخدم عادي" }}
                        </span>
                    </div>
                    
                    <div class="info-item">
                        <label>تاريخ الإنشاء:</label>
                        <span>
                            {% if user.created_at %}
                                {{ user.created_at | format_date }}
                            {% else %}
                                غير متوفر
                            {% endif %}
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <!-- Wishlist Section -->
        <div id="wishlist" class="content-section">
            <div class="section-header">
                <h2><i class="fas fa-heart"></i> قائمة المفضلة</h2>
            </div>

            <div class="wishlist-content">
                {% if wishlist_games and wishlist_games|length > 0 %}
                    <div class="wishlist-slider-container">
                        <div class="wishlist-slider" id="wishlistSlider">
                            {% for game in wishlist_games %}
                            <div class="wishlist-game-card" data-game-id="{{ game.id }}">
                                <div class="game-thumbnail">
                                    <img src="{{ game.thumbnail_url }}" alt="{{ game.title }}" 
                                        onerror="this.src='{{ url_for('static', filename='images/default-game.png') }}'">
                                    <button class="remove-from-wishlist" onclick="removeFromWishlist('{{ game.id }}', this)">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="game-info">
                                    <h3>{{ game.title }}</h3>
                                    <p class="game-description">{{ game.short_description }}</p>
                                    <div class="game-meta">
                                        <span class="rating">
                                            <i class="fas fa-star"></i> {{ game.rating }}
                                        </span>
                                        <span class="downloads">
                                            <i class="fas fa-download"></i> {{ game.downloads }}
                                        </span>
                                    </div>
                                    <a href="{{ url_for('game_details', game_slug=game.slug) }}" class="view-game-btn">
                                        عرض اللعبة
                                    </a>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                {% else %}
                    <div class="empty-wishlist">
                        <i class="fas fa-heart"></i>
                        <h3>قائمة المفضلة فارغة</h3>
                        <p>يمكنك إضافة الألعاب إلى المفضلة من خلال صفحة اللعبة</p>
                        <a href="{{ url_for('games') }}" class="btn btn-primary">
                            استكشف الألعاب
                        </a>
                    </div>
                {% endif %}
            </div>
        </div>
            <!-- Security Section -->
            <div id="security" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-shield-alt"></i> الأمان</h2>
                </div>

                <div class="security-content">
                    <!-- Change Password -->
                    <div class="security-card">
                        <h3>🔒 تغيير كلمة المرور</h3>
                        <form class="security-form" action="{{ url_for('change_password') }}" method="POST">
                            <div class="form-group">
                                <label>كلمة المرور الحالية:</label>
                                <div class="password-wrapper">
                                    <input type="password" name="current_password" required>
                                    <i class="fas fa-eye toggle-password" onclick="togglePassword(this)"></i>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>كلمة المرور الجديدة:</label>
                                <div class="password-wrapper">
                                    <input type="password" name="new_password" required minlength="8">
                                    <i class="fas fa-eye toggle-password" onclick="togglePassword(this)"></i>
                                </div>
                                <div class="password-strength" id="new-password-strength"></div>
                            </div>
                            
                            <div class="form-group">
                                <label>تأكيد كلمة المرور الجديدة:</label>
                                <div class="password-wrapper">
                                    <input type="password" name="confirm_password" required>
                                    <i class="fas fa-eye toggle-password" onclick="togglePassword(this)"></i>
                                </div>
                                <div id="password-match-check"></div>
                            </div>
                            
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> تغيير كلمة المرور
                            </button>
                        </form>
                    </div>

                    <!-- Forgot Password -->
                    <div class="security-card">
                        <h3>🔑 نسيت كلمة المرور؟</h3>
                        <p>إذا نسيت كلمة المرور، يمكنك طلب إعادة تعيينها عبر البريد الإلكتروني.</p>
                        <a href="{{ url_for('forgot_password') }}" class="btn btn-secondary">
                            <i class="fas fa-envelope"></i> إعادة تعيين كلمة المرور
                        </a>
                    </div>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="settings" class="content-section">
            <div class="section-header">
                <h2><i class="fas fa-cog"></i> الإعدادات</h2>
            </div>

            <div class="settings-content">
                <!-- Notification Settings -->
                <!-- <div class="setting-item">
                    <div class="setting-info">
                        <h4>🔔 الإشعارات</h4>
                        <p>استقبال إشعارات حول الألعاب الجديدة والتحديثات</p>
                    </div>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <h4>🎮 إشعارات المطور</h4>
                        <p>إشعارات خاصة بالمطورين حول أداء الألعاب</p>
                    </div>
                    <label class="switch">
                        <input type="checkbox" {{ 'checked' if user.is_developer() else '' }}>
                        <span class="slider"></span>
                    </label>
                </div> -->
                
                <!-- Social Media Settings (for developers only) -->
                {% if user.is_developer() %}
                <!-- Add this to your account.html template -->
                <div id="skills" class="settings-section">
                    <h3><i class="fas fa-code"></i> المهارات التقنية</h3>
                    
                    <div class="skills-manager">
                        <div id="skillsContainer">
                            <!-- For existing skills -->
                            {% if current_user.skills %}
                                {% for skill in current_user.skills %}
                                <div class="skill-input-group">
                                    <input type="text" name="skill_name" placeholder="اسم المهارة" value="{{ skill.name }}" class="skill-name">
                                    <input type="number" name="skill_level" placeholder="المستوى (0-100)" min="0" max="100" 
                                        value="{{ skill.level }}" class="skill-level" oninput="validateSkillLevel(this)">
                                    <button type="button" class="btn-remove-skill" onclick="removeSkill(this)">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                                {% endfor %}
                            {% else %}
                                <div class="skill-input-group">
                                    <input type="text" name="skill_name" placeholder="اسم المهارة" class="skill-name">
                                    <input type="number" name="skill_level" placeholder="المستوى (0-100)" min="0" max="100" 
                                        class="skill-level" oninput="validateSkillLevel(this)">
                                    <button type="button" class="btn-remove-skill" onclick="removeSkill(this)">
                                        <i class="fas fa-trash"></i>
                                    </button>

                                </div>
                            {% endif %}
                        </div>

                        <button type="button" class="btn-add-skill" onclick="addSkill()">
                            <i class="fas fa-plus"></i> إضافة مهارة
                        </button>
                        <form method="POST" action="{{ url_for('update_skills') }}" class="skills-form">
                            <input type="hidden" name="skills" id="skillsData">
                            <button type="submit" class="btn-save-skills">
                                <i class="fas fa-save"></i> حفظ المهارات
                            </button>
                        </form>
                        
                        <!-- Delete skill form (hidden) -->
                        <form method="POST" action="{{ url_for('delete_skills') }}" id="deleteSkillForm" style="display: none;">
                            <input type="hidden" name="skill_index" id="deleteSkillIndex">
                        </form>
                    </div>
                </div>
                <div class="setting-item social-media-settings">
                    <div class="setting-info">
                        <h4>🌐 وسائل التواصل الاجتماعي</h4>
                        <p>أضف روابط حساباتك على وسائل التواصل الاجتماعي</p>
                    </div>
                </div>
                
                <form class="social-media-form" action="{{ url_for('update_social_media') }}" method="POST">
                    <div class="form-group">
                        <label><i class="fab fa-twitter"></i> Twitter</label>
                        <input type="url" name="twitter" placeholder="https://twitter.com/اسم المستخدم" 
                            value="{{ user_social_media.twitter if user_social_media else '' }}">
                    </div>
                    
                    <div class="form-group">
                        <label><i class="fab fa-linkedin"></i> LinkedIn</label>
                        <input type="url" name="linkedin" placeholder="https://linkedin.com/in/اسم المستخدم" 
                            value="{{ user_social_media.linkedin if user_social_media else '' }}">
                    </div>
                    
                    <div class="form-group">
                        <label><i class="fab fa-github"></i> GitHub</label>
                        <input type="url" name="github" placeholder="https://github.com/اسم المستخدم" 
                            value="{{ user_social_media.github if user_social_media else '' }}">
                    </div>
                    
                    <div class="form-group">
                        <label><i class="fas fa-globe"></i> موقع الويب الشخصي</label>
                        <input type="url" name="website" placeholder="https://example.com" 
                            value="{{ user_social_media.website if user_social_media else '' }}">
                    </div>
                    
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> حفظ روابط التواصل
                    </button>
                </form>
                {% endif %}
            </div>
        </div>

            <!-- My Games Section (for developers) -->
            <!-- In the My Games section -->
            {% if user.is_developer() %}
            <div id="my-games" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-gamepad"></i> ألعابي</h2>
                    <a href="{{ url_for('upload') }}" class="btn btn-primary">
                        <i class="fas fa-plus"></i> إضافة لعبة جديدة
                    </a>
                </div>
                <div class="games-grid">
                    {% if developer_games %}
                        {% for game in developer_games %}
                        <div class="game-card">
                            <div class="game-thumbnail">
                                {% if game.thumbnail_url %}
                                <img src="{{ game.thumbnail_url }}" alt="{{ game.title }}" 
                                    onerror="this.onerror=null; this.src='{{ url_for('static', filename='images/default-game.png') }}'">
                                {% else %}
                                <img src="{{ url_for('static', filename='images/default-game.png') }}" alt="{{ game.title }}">
                                {% endif %}
                            </div>
                            <div class="game-info">
                                <h3>{{ game.title }}</h3>
                                <p class="developer">{{ user.username }}</p>
                                <p class="description">{{ game.short_description }}</p>
                                <div class="game-meta">
                                    <div class="rating">
                                        <i class="fas fa-star"></i> {{ game.rating }}
                                    </div>
                                </div>
                                <div class="game-actions">
                                    <a href="{{ url_for('game_details', game_slug=game.slug) }}" class="btn btn-small">
                                        <i class="fas fa-eye"></i> عرض
                                    </a>
                                    <button class="btn btn-small btn-danger" onclick="showDeleteModal('{{ game.id }}')">
                                        <i class="fas fa-trash"></i> حذف
                                    </button>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <div class="empty-state">
                            <i class="fas fa-gamepad"></i>
                            <h3>لا توجد ألعاب حتى الآن</h3>
                            <p>ابدأ برفع أول لعبة لك وانشر إبداعاتك للمجتمع</p>
                            <a href="{{ url_for('upload') }}" class="btn btn-primary">
                                <i class="fas fa-upload"></i> رفع أول لعبة
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<div id="deleteGameModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeDeleteModal()">&times;</span>
        <h2>تأكيد الحذف</h2>
        <p id="deleteModalMessage">هل أنت متأكد من أنك تريد حذف هذه اللعبة؟ هذا الإجراء لا يمكن التراجع عنه.</p>
        <div class="modal-actions">
            <button class="btn btn-danger" onclick="confirmDelete()">نعم، احذف</button>
            <button class="btn btn-secondary" onclick="closeDeleteModal()">إلغاء</button>
        </div>
    </div>
</div>
<!-- Password Reset Modal -->
<div id="resetModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h2>📧 تم إرسال رابط إعادة التعيين</h2>
        <p>تم إرسال رابط إعادة تعيين كلمة المرور إلى بريدك الإلكتروني: <strong>{{ user.email }}</strong></p>
        <p> يرجى رؤية بريدك الوارد ومجلد الرسائل غير المرغوب فيها.</p>
        <button class="btn btn-primary" onclick="closeModal()">حسناً</button>
    </div>
</div>

<script>

// delete game
// In account.html, add these JavaScript functions
let gameToDelete = null;

function showDeleteModal(gameId) {
    gameToDelete = gameId;
    document.getElementById('deleteGameModal').style.display = 'block';
}

function closeDeleteModal() {
    document.getElementById('deleteGameModal').style.display = 'none';
    gameToDelete = null;
}

function confirmDelete() {
    if (!gameToDelete) return;
    
    fetch('/delete-game/' + gameToDelete, {
        method: 'DELETE',
        headers: {
            'Content-Type': 'application/json',
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // Show success flash message
            showFlashMessage('تم حذف اللعبة بنجاح', 'success');
            // Reload the page after a short delay
            setTimeout(() => {
                location.reload();
            }, 1500);
        } else {
            showFlashMessage('فشل في حذف اللعبة: ' + data.message, 'error');
        }
        closeDeleteModal();
    })
    .catch(error => {
        console.error('Error:', error);
        showFlashMessage('حدث خطأ أثناء حذف اللعبة', 'error');
        closeDeleteModal();
    });
}

// Function to show flash messages (similar to Flask's flash)
function showFlashMessage(message, type) {
    const flashContainer = document.querySelector('.flash-messages');
    if (!flashContainer) return;
    
    const flashDiv = document.createElement('div');
    flashDiv.className = `flash-message flash-${type}`;
    flashDiv.innerHTML = `
        <span>${message}</span>
        <button class="flash-close" onclick="this.parentElement.remove()">
            <i class="fas fa-times"></i>
        </button>
    `;
    
    flashContainer.appendChild(flashDiv);
    
    // Auto remove after 5 seconds
    setTimeout(() => {
        if (flashDiv.parentNode) {
            flashDiv.remove();
        }
    }, 5000);
}

// Close modal if clicked outside
window.onclick = function(event) {
    const modal = document.getElementById('deleteGameModal');
    if (event.target === modal) {
        closeDeleteModal();
    }
}

// Wishlist functionality
function removeFromWishlist(gameId, button) {
    fetch('/remove-from-wishlist/' + gameId, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // Remove the card from the UI
            const card = button.closest('.wishlist-game-card');
            card.style.opacity = '0';
            card.style.transform = 'scale(0.8)';
            setTimeout(() => {
                card.remove();
                
                // Check if wishlist is now empty
                const remainingCards = document.querySelectorAll('.wishlist-game-card');
                if (remainingCards.length === 0) {
                    // Reload the section to show empty state
                    location.reload();
                } else {
                    // Reset slider position
                    currentSlide = 0;
                    document.getElementById('wishlistSlider').style.transform = 'translateX(0)';
                    updateSliderButtons();
                }
            }, 300);
        } else {
            alert(data.message);
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('حدث خطأ في إزالة اللعبة من المفضلة');
    });
}

// Slider functionality
let currentSlide = 0;

function slideWishlist(direction) {
    const slider = document.getElementById('wishlistSlider');
    const cards = document.querySelectorAll('.wishlist-game-card');
    
    if (cards.length === 0) return;
    
    // Calculate how many cards to show based on screen size
    let cardsToShow = 3;
    if (window.innerWidth <= 1024) cardsToShow = 2;
    if (window.innerWidth <= 768) cardsToShow = 1;
    
    const cardWidth = cards[0].offsetWidth + 20; // card width + margin
    const maxSlides = Math.max(0, cards.length - cardsToShow);
    
    currentSlide += direction;
    
    // Boundary checks
    if (currentSlide < 0) currentSlide = 0;
    if (currentSlide > maxSlides) currentSlide = maxSlides;
    
    slider.style.transform = `translateX(-${currentSlide * cardWidth}px)`;
    
    // Update button states
    updateSliderButtons();
}

function updateSliderButtons() {
    const cards = document.querySelectorAll('.wishlist-game-card');
    const prevBtn = document.querySelector('.slider-btn.prev');
    const nextBtn = document.querySelector('.slider-btn.next');
    
    // If no buttons exist (when cards <= 3), exit
    if (!prevBtn || !nextBtn) return;
    
    // Calculate how many cards to show based on screen size
    let cardsToShow = 3;
    if (window.innerWidth <= 1024) cardsToShow = 2;
    if (window.innerWidth <= 768) cardsToShow = 1;
    
    if (cards.length <= cardsToShow) {
        prevBtn.style.display = 'none';
        nextBtn.style.display = 'none';
        return;
    }
    
    prevBtn.style.display = 'flex';
    nextBtn.style.display = 'flex';
    
    if (currentSlide === 0) {
        prevBtn.disabled = true;
        prevBtn.style.opacity = '0.5';
    } else {
        prevBtn.disabled = false;
        prevBtn.style.opacity = '1';
    }
    
    if (currentSlide >= Math.max(0, cards.length - cardsToShow)) {
        nextBtn.disabled = true;
        nextBtn.style.opacity = '0.5';
    } else {
        nextBtn.disabled = false;
        nextBtn.style.opacity = '1';
    }
}

// Initialize slider on page load and when wishlist section is shown
function initWishlistSlider() {
    const wishlistSection = document.getElementById('wishlist');
    if (wishlistSection && wishlistSection.classList.contains('active')) {
        currentSlide = 0;
        const slider = document.getElementById('wishlistSlider');
        if (slider) {
            slider.style.transform = 'translateX(0)';
        }
        updateSliderButtons();
    }
}

document.addEventListener('DOMContentLoaded', function() {
    initWishlistSlider();
    
    // Handle window resize
    window.addEventListener('resize', function() {
        currentSlide = 0;
        const slider = document.getElementById('wishlistSlider');
        if (slider) {
            slider.style.transform = 'translateX(0)';
        }
        updateSliderButtons();
    });
});

// Update the showSection function to initialize slider when wishlist is shown
const originalShowSection = showSection;
showSection = function(sectionId) {
    originalShowSection(sectionId);
    
    // Initialize slider if wishlist section is shown
    if (sectionId === 'wishlist') {
        setTimeout(initWishlistSlider, 100);
    }
};  
// Skills management

function validateSkillLevel(input) {
    if (input.value > 100) {
        input.value = 100;
        showSkillLevelWarning('لا يمكن أن يتجاوز مستوى المهارة 100%');
    } else if (input.value < 0) {
        input.value = 0;
        showSkillLevelWarning('لا يمكن أن يكون مستوى المهارة أقل من 0%');
    }
}

function showSkillLevelWarning(message) {
    // Remove any existing warning
    const existingWarning = document.getElementById('skillLevelWarning');
    if (existingWarning) {
        existingWarning.remove();
    }
    
    // Create warning element
    const warning = document.createElement('div');
    warning.id = 'skillLevelWarning';
    warning.textContent = message;
    warning.style.color = '#e74c3c';
    warning.style.marginTop = '0.5rem';
    warning.style.padding = '0.5rem';
    warning.style.backgroundColor = 'rgba(231, 76, 60, 0.1)';
    warning.style.borderRadius = '4px';
    warning.style.border = '1px solid #e74c3c';
    
    // Insert after the skills container
    const skillsContainer = document.getElementById('skillsContainer');
    skillsContainer.parentNode.insertBefore(warning, skillsContainer.nextSibling);
    
    // Remove warning after 3 seconds
    setTimeout(() => {
        if (warning.parentNode) {
            warning.parentNode.removeChild(warning);
        }
    }, 3000);
}

function addSkill() {
    const container = document.getElementById('skillsContainer');
    const newSkill = document.createElement('div');
    newSkill.className = 'skill-input-group';
    newSkill.innerHTML = `
        <input type="text" name="skill_name" placeholder="اسم المهارة" class="skill-name">
        <input type="number" name="skill_level" placeholder="المستوى (0-100)" min="0" max="100" 
               class="skill-level" oninput="validateSkillLevel(this)">
        <button type="button" class="btn-remove-skill" onclick="removeSkill(this)">
            <i class="fas fa-trash"></i>
        </button>
    `;
    container.appendChild(newSkill);
}

function removeSkill(button) {
    const container = document.getElementById('skillsContainer');
    if (container.children.length > 1) {
        button.parentElement.remove();
    } else {
        // If it's the last skill, just clear the inputs
        const group = button.parentElement;
        group.querySelector('.skill-name').value = '';
        group.querySelector('.skill-level').value = '';
    }
}

// Prepare skills data before form submission
document.querySelector('.skills-form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const skills = [];
    const skillGroups = document.querySelectorAll('.skill-input-group');
    
    skillGroups.forEach(group => {
        const name = group.querySelector('.skill-name').value.trim();
        const level = group.querySelector('.skill-level').value;
        
        if (name && level) {
            skills.push({
                name: name,
                level: parseInt(level)
            });
        }
    });
    
    document.getElementById('skillsData').value = JSON.stringify(skills);
    this.submit();
});
    
// Form validation
document.getElementById('username-form').addEventListener('submit', function(e) {
    const newUsername = document.getElementById('username-edit').value.trim();
    
    // Client-side validation - ENGLISH ONLY
    if (newUsername.length < 3) {
        e.preventDefault();
        alert('اسم المستخدم يجب أن يكون 3 أحرف على الأقل');
        return;
    }
    
    if (newUsername.length > 20) {
        e.preventDefault();
        alert('اسم المستخدم يجب أن لا يتجاوز 20 حرف');
        return;
    }
    
    // English only validation
    if (!/^[a-zA-Z0-9_]+$/.test(newUsername)) {
        e.preventDefault();
        alert('اسم المستخدم يجب أن يحتوي على أحرف إنجليزية وأرقام وشرطة سفلية (_) فقط');
        return;
    }
});

// Section navigation
function showSection(sectionId) {
    // Hide all sections
    document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active');
    });
    
    // Show selected section
    document.getElementById(sectionId).classList.add('active');
    
    // Update active menu item
    document.querySelectorAll('.menu-item').forEach(item => {
        item.classList.remove('active');
    });
    document.querySelector(`[onclick="showSection('${sectionId}')"]`).classList.add('active');
    
    // Close mobile menu on selection
    if (window.innerWidth <= 768) {
        document.getElementById('accountSidebar').classList.remove('active');
    }
}

function shareResume(devId) {
    const resumeUrl = `{{ url_for('developer_share', dev_id='') }}${devId}`;
    
    if (navigator.share) {
        navigator.share({
            title: 'سيرتي الذاتية - Arcadehub',
            text: 'تعرف على أعمالي كمطور ألعاب',
            url: resumeUrl
        });
    } else {
        navigator.clipboard.writeText(resumeUrl);
        alert('تم نسخ رابط السيرة الذاتية إلى الحافظة');
    }
}


// Edit profile
function toggleEdit(section) {
    const form = document.getElementById('username-form');
    const display = document.getElementById('profile-display');
    const usernameDisplay = document.getElementById('username-display');
    const usernameEdit = document.getElementById('username-edit');
    const buttons = document.getElementById('profile-edit-buttons');
    
    if (form.style.display === 'block') {
        // Switch back to display mode
        form.style.display = 'none';
        display.style.display = 'block';
        buttons.style.display = 'none';
        usernameEdit.style.display = 'none';
        usernameDisplay.style.display = 'inline';
    } else {
        // Switch to edit mode
        form.style.display = 'block';
        display.style.display = 'none';
        buttons.style.display = 'flex';
        usernameEdit.style.display = 'block';
        usernameDisplay.style.display = 'none';
        usernameEdit.focus();
    }
}

function cancelEdit(section) {
    // Reset to original username
    const usernameEdit = document.getElementById('username-edit');
    const usernameDisplay = document.getElementById('username-display');
    usernameEdit.value = usernameDisplay.textContent;
    toggleEdit('profile');
}

// Form validation
document.getElementById('username-form').addEventListener('submit', function(e) {
    const newUsername = document.getElementById('username-edit').value.trim();
    
    // Client-side validation
    if (newUsername.length < 3) {
        e.preventDefault();
        alert('اسم المستخدم يجب أن يكون 3 أحرف على الأقل');
        return;
    }
    
    if (newUsername.length > 20) {
        e.preventDefault();
        alert('اسم المستخدم يجب أن لا يتجاوز 20 حرف');
        return;
    }
    
    if (!/^[a-zA-Z0-9\u0600-\u06FF]+$/.test(newUsername)) {
        e.preventDefault();
        alert('اسم المستخدم يجب أن يحتوي على أحرف وأرقام فقط');
        return;
    }
});
// Password functionality
function togglePassword(fieldId) {
    const input = document.getElementById(fieldId);
    const icon = input.parentElement.querySelector('.toggle-password');
    
    if (input.type === 'password') {
        input.type = 'text';
        icon.classList.replace('fa-eye', 'fa-eye-slash');
    } else {
        input.type = 'password';
        icon.classList.replace('fa-eye-slash', 'fa-eye');
    }
}

function changePassword(event) {
    event.preventDefault();
    const currentPass = document.getElementById('current-password').value;
    const newPass = document.getElementById('new-password').value;
    const confirmPass = document.getElementById('confirm-new-password').value;
    
    if (newPass !== confirmPass) {
        alert('كلمات المرور غير متطابقة');
        return false;
    }
    
    if (newPass.length < 8) {
        alert('كلمة المرور يجب أن تكون 8 أحرف على الأقل');
        return false;
    }
    
    alert('تم طلب تغيير كلمة المرور بنجاح');
    // Here you would send the request to the server
    return false;
}

function requestPasswordReset(event) {
    event.preventDefault();
    document.getElementById('resetModal').style.display = 'block';
    return false;
}

function closeModal() {
    document.getElementById('resetModal').style.display = 'none';
}

// Mobile menu toggle
function toggleMobileMenu() {
    document.getElementById('accountSidebar').classList.toggle('active');
}

// Close modal if clicked outside
window.onclick = function(event) {
    const modal = document.getElementById('resetModal');
    if (event.target === modal) {
        closeModal();
    }
}

// Password strength check
document.getElementById('new-password').addEventListener('input', function() {
    const password = this.value;
    const strengthDiv = document.getElementById('new-password-strength');
    
    if (password.length === 0) {
        strengthDiv.innerHTML = '';
        return;
    }
    
    let strength = 0;
    if (password.length >= 8) strength++;
    if (/[A-Z]/.test(password)) strength++;
    if (/[0-9]/.test(password)) strength++;
    if (/[^A-Za-z0-9]/.test(password)) strength++;
    
    const strengthText = ['ضعيفة جداً', 'ضعيفة', 'جيدة', 'قوية', 'قوية جداً'];
    const strengthColors = ['#ff4d4d', '#ff6b6b', '#feca57', '#48dbfb', '#1dd1a1'];
    
    strengthDiv.innerHTML = `
        <div style="color: ${strengthColors[strength]}">
            ${strengthText[strength]}
        </div>
    `;
});

// Password match check
document.getElementById('confirm-new-password').addEventListener('input', function() {
    const newPass = document.getElementById('new-password').value;
    const confirmPass = this.value;
    const matchDiv = document.getElementById('password-match-check');
    
    if (confirmPass.length === 0) {
        matchDiv.innerHTML = '';
        return;
    }
    
    if (newPass === confirmPass) {
        matchDiv.innerHTML = '<span style="color: #1dd1a1">✓ متطابقة</span>';
    } else {
        matchDiv.innerHTML = '<span style="color: #ff6b6b">✗ غير متطابقة</span>';
    }
});
</script>

<style>

.skill-level:invalid {
    border-color: #e74c3c;
    box-shadow: 0 0 5px rgba(231, 76, 60, 0.5);
}

.skill-level:valid {
    border-color: #2EC630;
    box-shadow: 0 0 5px rgba(46, 198, 48, 0.3);
}

.skill-level:focus:invalid {
    border-color: #e74c3c;
    box-shadow: 0 0 8px rgba(231, 76, 60, 0.7);
}

.skill-level:focus:valid {
    border-color: #2EC630;
    box-shadow: 0 0 8px rgba(46, 198, 48, 0.5);
}

.skill-input-group {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
    align-items: center;
}

.skill-name, .skill-level {
    padding: 0.5rem;
    border: 1px solid #444;
    border-radius: 4px;
    background: #2d2d2d;
    color: #f0f0f0;
}

.skill-name {
    flex: 2;
}

.skill-level {
    flex: 1;
    max-width: 100px;
}

.btn-remove-skill, .btn-delete-skill {
    color: white;
    border: none;
    padding: 0.5rem;
    border-radius: 4px;
    cursor: pointer;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.btn-remove-skill {
    background: #e67e22;
}

.btn-delete-skill {
    background: #e74c3c;
}

.btn-remove-skill:hover {
    background: #d35400;
}

.btn-delete-skill:hover {
    background: #c0392b;
}

.btn-add-skill {
    background: #ff425d;
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    cursor: pointer;
    margin-bottom: 1rem;
}

.btn-save-skills {
    background: #3498db;
    color: white;
    border: none;
    padding: 0.8rem 1.5rem;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    margin-top: 1rem;
}

.no-skills {
    text-align: center;
    color: #8f8f8f;
    padding: 1rem;
}

.no-skills i {
    font-size: 2rem;
    margin-bottom: 0.5rem;
    display: block;
}

.skills-manager {
    margin: 1rem 0;
}

.skill-input-group {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
    align-items: center;
}

.skill-name, .skill-level {
    padding: 0.5rem;
    border: 1px solid #444;
    border-radius: 4px;
    background: #2d2d2d;
    color: #f0f0f0;
}

.skill-name {
    flex: 1;
}

.skill-level {
    flex: 1;
    max-width: 100%;
}

.btn-remove-skill {
    background: #e74c3c;
    color: white;
    border: none;
    padding: 0.5rem;
    border-radius: 4px;
    cursor: pointer;
}

.btn-add-skill {
    background: #3498db;
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    cursor: pointer;
    margin-bottom: 1rem;
}

.btn-save-skills {
    background: #ff425d;
    color: white;
    border: none;
    padding: 0.8rem 1.5rem;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
}

.no-skills {
    text-align: center;
    color: #8f8f8f;
    padding: 1rem;
}

.no-skills i {
    font-size: 2rem;
    margin-bottom: 0.5rem;
    display: block;
}

/* Responsive Account Styles */
.account-container {
    min-height: 100vh;
    background: #1a1a1a;
    padding: 1rem;
}

.mobile-account-header {
    display: none;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    background: #2d2d2d;
    border-radius: 12px;
    margin-bottom: 1rem;
}

.mobile-menu-toggle {
    background: none;
    border: none;
    color: #f0f0f0;
    font-size: 1.5rem;
    cursor: pointer;
}

.account-content-wrapper {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 2rem;
    max-width: 1200px;
    margin: 0 auto;
}

.account-profile-card {
    background: #2d2d2d;
    border-radius: 12px;
    padding: 2rem;
    text-align: center;
    margin-bottom: 1rem;
}

.account-avatar {
    position: relative;
    margin: 0 auto 1rem;
    width: 80px;
}

.account-avatar img {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid #ff425d;
}

.online-status {
    position: absolute;
    bottom: 5px;
    right: 5px;
    width: 15px;
    height: 15px;
    border-radius: 50%;
    border: 2px solid #2d2d2d;
}

.online-status.online { background: #ff425d; }
.online-status.offline { background: #8f8f8f; }

.account-type-badge {
    display: inline-block;
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: bold;
    margin: 0.5rem 0;
}

.account-type-badge.developer { background: #ff425d; color: white; }
.account-type-badge.user { background: #3498db; color: white; }

.account-email {
    color: #b0b0b0;
    font-size: 0.9rem;
}

.account-menu {
    background: #2d2d2d;
    border-radius: 12px;
    padding: 1rem;
}

.menu-item {
    display: flex;
    align-items: center;
    padding: 1rem;
    color: #f0f0f0;
    text-decoration: none;
    border-radius: 8px;
    margin: 0.3rem 0;
    transition: background 0.3s;
}

.menu-item:hover,
.menu-item.active {
    background: #3d3d3d;
}

.menu-item i {
    margin-left: 0.8rem;
    width: 20px;
    text-align: center;
}

.logout-btn {
    color: #e74c3c !important;
    border-top: 1px solid #444;
    margin-top: 1rem;
    padding-top: 1rem;
}

.account-main-content {
    background: #2d2d2d;
    border-radius: 12px;
    padding: 2rem;
}

.content-section {
    display: none;
}

.content-section.active {
    display: block;
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #444;
}

.profile-info {
    display: grid;
    gap: 1rem;
}

.info-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    background: #3d3d3d;
    border-radius: 8px;
}

.info-item label {
    font-weight: bold;
    color: #ff425d;
}

.edit-buttons {
    display: flex;
    gap: 1rem;
    margin-top: 1rem;
}

.security-card {
    background: #3d3d3d;
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
}

.security-form {
    margin-top: 1rem;
}

.setting-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    background: #3d3d3d;
    border-radius: 8px;
    margin-bottom: 1rem;
}

.setting-info h4 {
    margin: 0 0 0.3rem 0;
    color: #f0f0f0;
}

.setting-info p {
    margin: 0;
    color: #b0b0b0;
    font-size: 0.9rem;
}

/* Switch toggle */
.switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 24px;
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: .4s;
    border-radius: 24px;
}

.slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
}

input:checked + .slider {
    background-color: #ff425d;
}

input:checked + .slider:before {
    transform: translateX(26px);
}

/* Modal */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
}

.modal-content {
    background-color: #2d2d2d;
    margin: 15% auto;
    padding: 2rem;
    border-radius: 12px;
    width: 90%;
    max-width: 500px;
    text-align: center;
}

.close {
    color: #aaa;
    float: left;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.close:hover {
    color: #f0f0f0;
}

/* Empty state */
.empty-state {
    text-align: center;
    padding: 3rem;
    color: #b0b0b0;
}

.empty-state i {
    font-size: 4rem;
    margin-bottom: 1rem;
    color: #ff425d;
}

/* Responsive Design */
@media (max-width: 968px) {
    .account-content-wrapper {
        grid-template-columns: 250px 1fr;
        gap: 1rem;
    }
}

@media (max-width: 768px) {
    .mobile-account-header {
        display: flex;
    }
    
    .account-content-wrapper {
        grid-template-columns: 1fr;
    }
    
    .account-sidebar {
        position: fixed;
        left: -100%;
        top: 0;
        width: 80%;
        height: 100vh;
        background: #2d2d2d;
        z-index: 1000;
        transition: left 0.3s ease;
        overflow-y: auto;
    }
    
    .account-sidebar.active {
        left: 0;
    }
    
    .account-main-content {
        padding: 1rem;
    }
    
    .info-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
    }
    
    .section-header {
        flex-direction: column;
        gap: 1rem;
        align-items: flex-start;
    }
}

@media (max-width: 480px) {
    .account-container {
        padding: 0.5rem;
    }
    
    .security-card {
        padding: 1rem;
    }
    
    .setting-item {
        flex-direction: column;
        gap: 1rem;
        align-items: flex-start;
    }
}

/* Buttons */
.btn {
    padding: 0.7rem 1.2rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-family: 'Tajawal', sans-serif;
    font-weight: 500;
    transition: all 0.3s;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

.btn-primary {
    background: #ff425d;
    color: white;
}

.btn-primary:hover {
    background: #aa2b3e;
    transform: translateY(-2px);
}

.btn-secondary {
    background: #6c757d;
    color: white;
}

.btn-secondary:hover {
    background: #5a6268;
}

.btn-edit {
    background: #3498db;
    color: white;
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
}

/* Form styles */
.form-group {
    margin-bottom: 1rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    color: #f0f0f0;
    font-weight: 500;
}

.form-group input {
    width: 100%;
    padding: 0.8rem;
    border: 1px solid #444;
    border-radius: 8px;
    background: #3d3d3d;
    color: #f0f0f0;
    font-family: 'Tajawal', sans-serif;
}

.password-wrapper {
    position: relative;
}

.toggle-password {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    color: #8f8f8f;
}

.edit-field {
    background: #2d2d2d !important;
    border: 2px solid #ff425d !important;
}

.game-actions {
    display: flex;
    gap: 0.5rem;
    margin-top: 1rem;
}

.btn-small {
    padding: 0.4rem 0.8rem;
    font-size: 0.9rem;
}

.empty-state {
    text-align: center;
    padding: 3rem;
    color: #b0b0b0;
    grid-column: 1 / -1;
}

.empty-state i {
    font-size: 4rem;
    margin-bottom: 1rem;
    color: #ff425d;
}

.empty-state h3 {
    color: #f0f0f0;
    margin-bottom: 0.5rem;
}

.games-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 1.5rem;
}

.developer-resume-actions {
    display: flex;
    gap: 1rem;
    margin-top: 1rem;
    flex-wrap: wrap;
}

.developer-resume-actions .btn {
    padding: 0.8rem 1.5rem;
    font-size: 0.9rem;
}

@media (max-width: 768px) {
    .developer-resume-actions {
        flex-direction: column;
    }
    
    .developer-resume-actions .btn {
        width: 100%;
    }
}

/* Wishlist Styles */
.wishlist-content {
    padding: 1rem 0;
}

.wishlist-slider-container {
    position: relative;
    overflow: hidden;
    padding: 0 40px;
}

.wishlist-slider {
    display: flex;
    gap: 20px;
    transition: transform 0.3s ease;
    padding: 10px 0;
    min-height: 320px;
    flex-wrap: wrap;
    justify-content: center;
}

.wishlist-game-card {
    flex: 0 0 calc(33.333% - 14px);
    background: #3d3d3d;
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.3s ease;
    position: relative;
    min-width: 300px;
}

.wishlist-game-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
}

.wishlist-game-card .game-thumbnail {
    position: relative;
    height: 180px;
    overflow: hidden;
}

.wishlist-game-card .game-thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.wishlist-game-card:hover .game-thumbnail img {
    transform: scale(1.05);
}

.remove-from-wishlist {
    position: absolute;
    top: 10px;
    left: 10px;
    background: rgba(231, 76, 60, 0.9);
    color: white;
    border: none;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.wishlist-game-card:hover .remove-from-wishlist {
    opacity: 1;
}

.remove-from-wishlist:hover {
    background: #e74c3c;
}

.wishlist-game-card .game-info {
    padding: 1rem;
}

.wishlist-game-card .game-info h3 {
    color: #f0f0f0;
    margin-bottom: 0.5rem;
    font-size: 1.1rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.wishlist-game-card .game-description {
    color: #b0b0b0;
    font-size: 0.9rem;
    margin-bottom: 1rem;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    height: 40px;
}

.wishlist-game-card .game-meta {
    display: flex;
    justify-content: space-between;
    margin-bottom: 1rem;
}

.wishlist-game-card .rating,
.wishlist-game-card .downloads {
    color: #8f8f8f;
    font-size: 0.8rem;
    display: flex;
    align-items: center;
    gap: 0.3rem;
}

.wishlist-game-card .rating {
    color: #f39c12;
}

.view-game-btn {
    display: block;
    text-align: center;
    background: #ff425e93;
    color: #fff;
    padding: 0.5rem;
    border-radius: 6px;
    text-decoration: none;
    transition: all 0.3s ease;
}

.view-game-btn:hover {
    background: #ff425ec5;
}

.slider-controls {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    transform: translateY(-50%);
    display: flex;
    justify-content: space-between;
    pointer-events: none;
}

.slider-btn {
    pointer-events: auto;
    background: rgba(61, 61, 61, 0.8);
    color: #f0f0f0;
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

.slider-btn:hover:not(:disabled) {
    background: #3d3d3d;
    transform: scale(1.1);
}

.slider-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.empty-wishlist {
    text-align: center;
    padding: 3rem;
    color: #8f8f8f;
}

.empty-wishlist i {
    font-size: 4rem;
    margin-bottom: 1rem;
    color: #e74c3c;
    opacity: 0.5;
}

.empty-wishlist h3 {
    color: #f0f0f0;
    margin-bottom: 0.5rem;
}

/* Responsive Design */
@media (max-width: 1024px) {
    .wishlist-game-card {
        flex: 0 0 calc(50% - 10px);
    }
}

@media (max-width: 768px) {
    .wishlist-slider-container {
        padding: 0 30px;
    }
    
    .wishlist-game-card {
        flex: 0 0 100%;
    }
    
    .slider-btn {
        width: 35px;
        height: 35px;
    }
}

@media (max-width: 480px) {
    .wishlist-slider-container {
        padding: 0 20px;
    }
    
    .wishlist-game-card {
        min-width: 250px;
    }
    
    .wishlist-game-card .game-thumbnail {
        height: 150px;
    }
}

.wishlist-slider {
    display: flex;
    gap: 20px;
    transition: transform 0.3s ease;
    padding: 10px 0;
    min-height: 320px; /* Prevent layout shift when empty */
}

/* Ensure proper card sizing */
.wishlist-game-card {
    flex: 0 0 calc(33.333% - 14px);
    background: #3d3d3d;
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.3s ease;
    position: relative;
    min-width: 300px;
    max-width: 100%;
}

/* Responsive adjustments */
@media (max-width: 1024px) {
    .wishlist-game-card {
        flex: 0 0 calc(50% - 10px);
    }
}

@media (max-width: 768px) {
    .wishlist-game-card {
        flex: 0 0 100%;
    }
}

.btn-danger {
    background: #e74c3c;
    color: white;
}

.btn-danger:hover {
    background: #c0392b;
}
/* In account.html, add this CSS */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
}

.modal-content {
    background-color: #2d2d2d;
    margin: 15% auto;
    padding: 2rem;
    border-radius: 12px;
    width: 90%;
    max-width: 500px;
    text-align: center;
    position: relative;
}

.modal-content h2 {
    color: #f0f0f0;
    margin-bottom: 1rem;
}

.modal-content p {
    color: #b0b0b0;
    margin-bottom: 2rem;
    line-height: 1.5;
}

.modal-actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
}

.modal-actions .btn {
    min-width: 120px;
}

.close {
    color: #aaa;
    position: absolute;
    top: 1rem;
    left: 1rem;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.close:hover {
    color: #f0f0f0;
}

/* Flash messages styling */
.flash-messages {
    position: fixed;
    top: 100px;
    right: 20px;
    z-index: 1000;
    max-width: 400px;
}

.flash-message {
    padding: 1rem;
    margin-bottom: 1rem;
    border-radius: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    animation: slideIn 0.3s ease;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.flash-success {
    background-color: rgba(46, 198, 48, 0.9);
    color: white;
    border-left: 4px solid #25a328;
}

.flash-error {
    background-color: rgba(231, 76, 60, 0.9);
    color: white;
    border-left: 4px solid #c0392b;
}

.flash-close {
    background: none;
    border: none;
    color: white;
    cursor: pointer;
    margin-left: 1rem;
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

</style>
{% endblock %}